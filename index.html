<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Land Water and Conservation Fund</title>

      <!-- CSS -->
      <link rel="stylesheet" href="css/bootstrap.css">
      <link rel="stylesheet" href="css/L.Control.Sidebar.css" />
      <link rel="stylesheet" href="css/MarkerCluster.Default.css" />
      <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/>

      <link href="https://fonts.googleapis.com/css2?family=Amatic+SC&family=Cinzel:wght@500&family=Commissioner:wght@300&family=Josefin+Sans:wght@500&family=Raleway:wght@300&display=swap" rel="stylesheet">

      <!-- JavaScript -->
      <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="  crossorigin=""></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
      <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>
      <script src="js/L.Control.Sidebar.js"></script>
      <script src="js/d3.js"></script>
      <script src="js/c3.min.js"></script>
      <script src="js/chroma.min.js"></script>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-light fixed-top bg-light" id="mainNav">
  <div class="container">
    <p><a href="https://recreationroundtable.org/">
    <img src="img/ORR.png"  width="15%" ></a>
  <a href="https://orei.oregonstate.edu/">
    <img src="img/osu.png"  width="15%" ></a>
    <a href="https://www.lwcfcoalition.com/">
      <img src="img/LWCF.png"  width="6%" ></a></p>

      <a class="navbar-brand" href="index.html"></a>
      <button class="navbar-toggler navbar-toggler-Left" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        Menu
        <i class="fas fa-bars"></i>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="index.html#project">Project</a></li>
          <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="index.html#mapdata">Map</a></li>
          <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="index.html#dataanalysis">Data</a></li>
          <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="index.html#about">About</a></li>
            </ul>
      </div>
    </div>
  </nav>

    <div class="container-fluid">
      <section id="project" class="project-section">
        <div class="center">
          <h1> The Land & Water Conservation Fund Coalition</h1>

            <h4> Top 10 Projects Information </h4>
                </div>
            <div class="row">
              <div class="col">
            <p class="lorem">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
          </div>
          <div class="col">
            <p class="lorem">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
            </div>
            </div>
          </section>

        <section id="mapdata" class="mapdata-section">
          <div class="center">
            <h1> Map for Land & Water Conservation Survey</h1>
          </div>
          <br>
          <div id="sidebar">
            <h2 id='pro'> </h2>
            <h5 id='org' > </h5>
              <p id='description'> </p>
              <p id='cos'> </p>
              <p id='type'> </p>
              <p id='rec'> </p>
          </div>
          <div id="map"></div>
        </section>


        <section id="dataanalysis" class="dataanalysis-section">
          <div class="center">
            <h1> Data Anyalsis</h1>
            <a href="assets/cost.csv" download>
              Click Me for Survey Data
            </a>
          </div>

          <div class="row">
            <div class="col">
              <div id="barchart"></div>
            </div>
            <div class="col">
              <div class="center">
              <h3>Multiple choice results LWCF Program</h3>
                </div>
              <p class="lorem">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>

            </div>
            </div>
            <div class="row">
              <div class="col">
                <div class="center">
                <h3>Estimated Cost Range </h3>
                  </div>
                <p class="lorem">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
              </div>
              <div class="col">
                <div id="cost-chart"></div>
              </div>
              </div>
              <div class="row">
                <div class="col">
                  <div id="chart"></div>
                </div>
                <div class="col">
                  <div class="center">
                  <h3>Project Type </h3>
                    </div>
                  <p class="lorem">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
                </div>

                </div>
                <div class="row">
                  <div class="col">
                    <div class="center">
                    <h3>Categorization of the project</h3>
                      </div>
                    <p class="lorem">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
                  </div>
                  <div class="col">
                    <div id="catchart"></div>
                  </div>
                  </div>

                  <div class="row">
                    <div class="col">
                      <div id="recchart"></div>
                    </div>
                    <div class="col">
                      <div class="center">
                      <h3>Multiple choice results from Rec Type</h3>
                        </div>
                      <p class="lorem">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>

                    </div>
                    </div>


      </section>

      <section id="about" class="about-section bg-black">
        <div class="center">
          <h1> About Us </h1>
        </div>
          <p class="lorem">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>

      </section>
    </div>
    <div class="copyright py-4 text-center text-white">
      <div class="container">
        <p> In partnership with <img src="img/osu.png" width="150">
        </div>
      </div>
      <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes)-->
      <div class="scroll-to-top d-lg-none position-fixed">
        <a class="js-scroll-trigger d-block text-center text-white rounded" href="#page-top"><i class="fa fa-chevron-up"></i></a>
      </div>

<script>
  var colors = chroma.scale('Set2').mode('lch').colors(9);
  // Map
  var map = L.map("map",{
     minZoom: 4,
    maxZoom: 8,
    scrollWheelZoom: false

  }).setView([38,-98.], 4);


  L.tileLayer('https://api.mapbox.com/styles/v1/loweas/ck6rbqwaj20fi1inwqn4c4w99/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoibG93ZWFzIiwiYSI6ImNqczlhMzJqMjE1dDM0NG12dHBxam1lZjIifQ.Ox8goYypCr_cJCoDPgHTsQ').addTo(map);
  var markers = L.markerClusterGroup({ disableClusteringAtZoom: 9 });
  var tests = null;
  // Get GeoJSON and put on it on the map when it loads
  tests= L.geoJson.ajax("assets/tester.geojson",{
    attribution: 'Made By <a href="https://github.com/loweas">loweas</a>'
    })

    tests.on('data:loaded', function () {
      markers.addLayer(tests);
      map.addLayer(markers);

    });

    var sidebar = L.control.sidebar('sidebar', {
      closeButton: true,
      position: 'right'
    });

    map.addControl(sidebar);

    tests.on('click', function (e) {


              sidebar.toggle();
              var pro = document.getElementById('pro');
              pro.innerHTML =  e.layer.feature.properties.Q5_1;


              var name = document.getElementById('org');
              if (e.layer.feature.properties.Q1_1 =="NA"){
                name.innerHTML =  e.layer.feature.properties.Q1_2_TEXT;
                }
              else (name.innerHTML =  e.layer.feature.properties.Q1_1)

              var des = document.getElementById('description');
              des.innerHTML = "Project Description : <br> " + e.layer.feature.properties.Q5_2;

              var cos = document.getElementById('cos');
              cos.innerHTML = "Estimated Cost : " + e.layer.feature.properties.Q13;

              var type = document.getElementById('type');
              type.innerHTML = "Project Type : " + e.layer.feature.properties.Q31;

              var rec = document.getElementById('rec');
              rec.innerHTML = "Targeted Recreation : " + e.layer.feature.properties.Q15;


            });

            map.once('focus', function() { map.scrollWheelZoom.enable(); });


            // Data Analysis Part of the Website using D3 and C3

            // Color for graphs
            var color4 = chroma.scale(['#5c8e53', '#2a4c7e']).mode('lch').colors(4);
            var color5 = chroma.scale(['#5c8e53', '#2a4c7e']).mode('lch').colors(5);
            var color6 = chroma.scale(['#5c8e53', '#2a4c7e']).mode('lch').colors(6);
            var color7 = chroma.scale(['#5c8e53', '#2a4c7e','#8E535C']).mode('lch').colors(7);

            Promise.all([
              d3.csv('assets/cost.csv',d3.autoType),
              d3.csv('assets/lwcf/tester.csv',d3.autoType),
            ]).then(function(datasets) {
              var cost = ["num"];
              var df = datasets[1];
              console.log(df)


                // 7. Project Type
                var protypeCount = d3.nest()
                .key(function(d) { return d.Q31; })
                .rollup(function(v) { return v.length; })
                .entries(df);

                var protypedata = {};
                var sites = [];
                protypeCount.forEach(function(e) {
                sites.push(e.key);
                protypedata[e.key] = e.value;
                })

                // 8. How would you best categorize the project?
                var procatCount = d3.nest()
                .key(function(d) { return d.Q10; })
                .rollup(function(v) { return v.length; })
                .entries(df);

                var procatdata = {};
                var sitescat = [];
                procatCount.forEach(function(e) {
                sitescat.push(e.key);
                procatdata[e.key] = e.value;
                })


              datasets[0].forEach(function(d) {
                cost.push(+d["num"]);

                });


console.log(cost)

              var costchart = c3.generate({
                data: {
                  stack: {
                    normalize: true
                  },
                columns: [cost],
                  type: 'bar',

                  } ,
                  color: {
                    pattern: [color7[0], color7[2], color7[3], color7[4]]
                  },
                  axis: {
                    x: {
                      type: "category",
                      categories: [ "$1,750,000+","$1,500,000 - $1,750,000","$1,250,001 - $1,500,000",'$1,000,001-$1,250,000',"$750,0001 - $1,000,000","$500,001 - $750,000","$250,001 - $500,000","$0 - $250,000",'Unknown']
                    },
                      rotated: true
                  },
                bindto: "#cost-chart"
                });

                var chart = c3.generate({
                  data: {
                      json: [ protypedata ],
                      keys: {
                          value: sites,
                      },
                      type:'pie'
                  },
                       axis: {
                         x: {
                           type: 'category'
                         }
                          },
                       color: {
                         pattern: [color7[0], color7[2], color7[3], color7[4], 'grey']
                       },
                  bindto: "#chart"
                });

              var catchart = c3.generate({
                data: {
                  json: [ procatdata ],
                  keys: {
                      value: sitescat,
                  },
                  type : 'pie',
                     },
                     axis: {
                       x: {
                         type: 'category'
                       }
                        },
                     color: {
                       pattern: [color7[0], color7[2], color7[3]]
                     },

                bindto: "#catchart"
              });


              var barchart = c3.generate({
                  data: {
                    columns: [
                      ['data1', 30, 200, 100, 400, 150, 250],
                      ['data2', 130, 100, 140, 200, 150, 50]
                    ],
                    type: 'bar'
                  },
                  color: {
                    pattern: [color7[0],  color7[4]]
                  },
                  bar: {
                    width: {
                      ratio: 0.5 // this makes bar width 50% of length between ticks
                    }
                  },
                  bindto: "#barchart"
                  });
                  var recchart = c3.generate({
                      data: {
                        columns: [
                          ['data1', 30, 200, 100, 400, 150, 250],
                          ['data2', 130, 100, 140, 200, 150, 50]
                        ],
                        type: 'bar'
                      },
                      color: {
                        pattern: [color7[0],  color7[4]]
                      },
                      bar: {
                        width: {
                          ratio: 0.5 // this makes bar width 50% of length between ticks
                        }
                      },
                      bindto: "#recchart"
                      });
                      });


</script>
</body>
</html>
